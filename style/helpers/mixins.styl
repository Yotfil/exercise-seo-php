@require "nib"
@require "./tokens"

// Pixels to REM
rem(measure)
    return measure / unit(font-size-base, "") * 1rem

// Pixels to EM
em(measure)
    return measure / unit(font-size-base, "") * 1em

// Add retina background media
bg-retina(file, ext, parallax = false)
    background-image: url(file + "." + ext)
    background-size: cover
    background-position: center center

    if (parallax)
        background-attachment: fixed

    @media (-webkit-min-device-pixel-ratio: 2), (min--moz-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2 / 1), (min-device-pixel-ratio: 2), (min-resolution: 192dpi), (min-resolution: 2dppx)
        background-image: url(file + "@2x" + ext)
        background-size: cover
        background-position: center center

        if (parallax)
            background-attachment: fixed

// Cross-browser placeholder support
placeholder()
    &::-webkit-input-placeholder
        {block}

    &:-moz-placeholder
        {block}

    &::-moz-placeholder
        {block}

    &:-ms-input-placeholder
        {block}

scrollbars(size, foreground-color, background-color = mix(foreground-color, color-white, 50%))
    // For Google Chrome
    ::-webkit-scrollbar
        width: size
        height: size

    ::-webkit-scrollbar-thumb
        background: foreground-color

    ::-webkit-scrollbar-track
        background: background-color

    // For Internet Explorer
    body
    *
        scrollbar-face-color: foreground-color
        scrollbar-track-color: background-color

disabled(color)
    &:disabled
    &[disabled]
    &--disabled
        background: lighten(color, 40%)
        cursor: not-allowed
        {block}

        &:hover
            background: @background

font-face(font, weight, style = "normal")
    @font-face
        font-family: font
        src: url("/static/fonts/" + font + ".woff2") format("woff2"), url("/static/fonts/" + font + ".woff2") format("woff"), url("/static/fonts/" + font + ".woff2") format("ttf")
        font-weight: weight
        font-style: style
